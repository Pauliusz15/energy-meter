(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,n){e.exports=n(271)},144:function(e,t,n){},146:function(e,t,n){},271:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(36),o=n.n(i),c=(n(144),n(24)),l=n(25),s=n(29),u=n(26),p=n(30),m=(n(146),n(17)),h=n(28),d=n(16),f=n(279),v=function(e){return{type:"ADD_RESULT_ROW",payload:e}},b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={startTime:0,time:0,startDisabled:!1,lapDisabled:!0,lapNum:0,previousTime:null},n.onStart=n.onStart.bind(Object(m.a)(Object(m.a)(n))),n.onReset=n.onReset.bind(Object(m.a)(Object(m.a)(n))),n.onImp=n.onImp.bind(Object(m.a)(Object(m.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"onStart",value:function(){var e=this;this.setState({startTime:new Date,startDisabled:!0,lapDisabled:!1}),this.timerID=setInterval(function(){return e.tick()},100),window.navigator.vibrate(50)}},{key:"onReset",value:function(){this.setState({time:0,startDisabled:!1,lapDisabled:!0,previousTime:null,lapNum:0}),this.props.addResultRow([]),clearInterval(this.timerID)}},{key:"onImp",value:function(){this.setState({lapNum:this.state.lapNum+1});var e=new Date,t=e-(this.state.previousTime?this.state.previousTime:this.state.startTime),n={nr:this.state.lapNum,period:t,kw:w(this.props.coeff,this.props.imp,this.props.impKwh,t)},a=this.props.resultRows.slice();a.unshift(n),this.props.addResultRow(a),this.setState({previousTime:e}),window.navigator.vibrate(50)}},{key:"tick",value:function(){this.setState({time:new Date-this.state.startTime})}},{key:"render",value:function(){return r.a.createElement("div",{className:"align-center"},r.a.createElement(g,{time:this.state.time}),r.a.createElement(E,{onStart:this.onStart,onImp:this.onImp,onReset:this.onReset,startDisabled:this.state.startDisabled}))}}]),t}(a.Component),w=function(e,t,n,a){return(e*t*3600/(n*a/1e3)).toFixed(3)},g=function(e){var t=parseInt(e.time%1e3/100),n=parseInt(e.time/1e3)%60,a=parseInt(e.time/6e4);return r.a.createElement("div",{className:"time-text-container align-center"},r.a.createElement("p",null,a," : ",("0"+n).slice(-2)," : ",t))},E=function(e){return e.startDisabled?r.a.createElement("div",{className:"btn-container"},r.a.createElement(f.a.Group,{size:"big",fluid:!0},r.a.createElement(f.a,{className:"stopwatch-button",onClick:e.onReset,content:"Reset"}),r.a.createElement(f.a,{className:"stopwatch-button",onClick:e.onImp,content:"Imp"}))):r.a.createElement("div",{className:"btn-container"},r.a.createElement(f.a.Group,{size:"big",fluid:!0},r.a.createElement(f.a,{className:"stopwatch-button",onClick:e.onReset,content:"Reset"}),r.a.createElement(f.a,{className:"stopwatch-button",onClick:e.onStart,content:"Start"})))},y=Object(h.b)(function(e){return{resultRows:e.resultRows,coeff:e.coeff,imp:e.imp,impKwh:e.impKwh}},function(e){return Object(d.a)({addResultRow:v},e)})(b),O=n(278),k=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"createRows",value:function(){var e=this;return this.props.resultRows.map(function(t){return t.key=e.props.resultRows.length-1===t.nr?r.a.createElement(j,{fontWeight:"bold",key:t.nr,nr:t.nr+1,period:t.period,kw:t.kw}):r.a.createElement(j,{key:t.nr,nr:t.nr+1,period:t.period,kw:t.kw})})}},{key:"render",value:function(){var e=this.createRows();return r.a.createElement("div",{className:"lap-table"},r.a.createElement(O.a,{unstackable:!0,fixed:!0,size:"small",celled:!0,striped:!0},r.a.createElement(O.a.Header,null,r.a.createElement(O.a.Row,{textAlign:"center",style:{fontSize:18}},r.a.createElement(O.a.HeaderCell,{width:3},"\u2116"),r.a.createElement(O.a.HeaderCell,null,"Time"),r.a.createElement(O.a.HeaderCell,null,"kW"))),r.a.createElement(O.a.Body,null,e)))}}]),t}(a.Component),j=function(e){var t=parseInt(e.period/6e4),n=parseInt(e.period/1e3)%60,a=parseInt(e.period%1e3/100),i=t+":"+("0"+n).slice(-2)+":"+a;return r.a.createElement(O.a.Row,{textAlign:"center",style:{fontWeight:e.fontWeight,fontSize:18}},r.a.createElement(O.a.Cell,{width:3},e.nr),r.a.createElement(O.a.Cell,null,i),r.a.createElement(O.a.Cell,null,e.kw))},C=Object(h.b)(function(e){return{resultRows:e.resultRows}},function(e){return Object(d.a)({},e)})(k),R=n(272),I=n(277),N=function(e,t){switch(e){case"coeffInput":return{type:"CHANGE_COEFF",payload:t};case"impInput":return{type:"CHANGE_IMP",payload:t};case"impKwhInput":return{type:"CHANGE_IMP_KWH",payload:t}}},D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).changeVal=n.changeVal.bind(Object(m.a)(Object(m.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"changeVal",value:function(e){var t=e.target.id,n=e.target.value;this.props.changeParameter(t,n)}},{key:"render",value:function(){return r.a.createElement("div",{className:"align-center"},r.a.createElement("div",{className:"parameters"},r.a.createElement(S,{id:"coeffInput",onChange:this.changeVal,value:this.props.coeff,text:"Coefficient"}),r.a.createElement(S,{id:"impInput",onChange:this.changeVal,value:this.props.imp,text:"Impulse"}),r.a.createElement(S,{id:"impKwhInput",onChange:this.changeVal,value:this.props.impKwh,text:"Imp/kWh"})))}}]),t}(a.Component),S=function(e){return r.a.createElement("div",{className:"parameter"},r.a.createElement("div",null,r.a.createElement(R.a,{pointing:"below"},e.text)),r.a.createElement("div",null,r.a.createElement(I.a,{id:e.id,type:"number",fluid:!0,onFocus:W,size:"small",onKeyPress:A,onChange:e.onChange,value:e.value,placeholder:"Number"})))},W=function(e){return e.target.select()},A=function(e){var t;"paste"===e.type?t=e.clipboardData.getData("text/plain"):(t=e.keyCode||e.which,t=String.fromCharCode(t));/[0-9]|\./.test(t)||(e.returnValue=!1,e.preventDefault&&e.preventDefault())},T=Object(h.b)(function(e){return{coeff:e.coeff,imp:e.imp,impKwh:e.impKwh}},function(e){return Object(d.a)({changeParameter:N},e)})(D),x=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement(y,null),r.a.createElement(C,null))}}]),t}(a.Component),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(268);var _=Object(d.b)({resultRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RESULT_ROW":return t.payload;default:return e}},coeff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COEFF":return t.payload;default:return e}},imp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_IMP":return t.payload;default:return e}},impKwh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_IMP_KWH":return t.payload;default:return e}}}),P=Object(d.c)(_);o.a.render(r.a.createElement(h.a,{store:P},r.a.createElement(x,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/energy-meter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/energy-meter","/service-worker.js");H?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):K(t,e)})}}()}},[[139,2,1]]]);
//# sourceMappingURL=main.0f1b98e1.chunk.js.map